<head>
  <title>CellPond</title>
  <!-- 	<link rel="shortcut icon" href=" ready when you are tode-friend! " /> -->
  <meta name="twitter:card" content="summary" />
  <meta property="og:title" content="CellPond" />
  <meta property="og:site_name" content="CellPond" />
  <meta property="og:description" content="Surreal Cellular Automata" />
  <meta property="og:type" content="website" />
  <meta
    property="og:image"
    content="https://www.cellpond.cool/assets/cellpond-og-image.png" />
  <meta
    property="og:image:alt"
    content="An example ruleset made with CellPond" />
</head>
<script src="libraries/habitat-embed.js"></script>
<script src="libraries/show.js"></script>
<script src="libraries/linked-list.js"></script>
<script>
  Habitat.install(this);
</script>
<script src="libraries/colour.js"></script>
<script src="the-one-true-todey-file-of-cellpond.js"></script>
<script type="module">
  import { addPondiverseButton } from "https://www.pondiverse.com/pondiverse.js";

  const offscreenCanvas = document.createElement("canvas");
  const offscreenContext = offscreenCanvas.getContext("2d");

  requestAnimationFrame(() => {
    addPondiverseButton(() => {
      const canvases = document.querySelectorAll("canvas");
      const canvas = canvases[0];
      const paddleCanvas = canvases[1];
      offscreenCanvas.width = canvas.width;
      offscreenCanvas.height = canvas.height;
      offscreenContext.fillStyle = Colour.Void;
      offscreenContext.fillRect(0, 0, canvas.width, canvas.height);
      offscreenContext.drawImage(canvas, 0, 0);
      offscreenContext.drawImage(paddleCanvas, 0, 0);

      return {
        type: "cellpond",
        data: JSON.stringify({
          paddles: packPaddles(),
        }),
        image: offscreenCanvas.toDataURL("image/png"),
      };
    });
  });
</script>
